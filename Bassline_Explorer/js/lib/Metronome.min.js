!function(t,e){function s(e,s){this.bpm=e,this.res=s,this.ticks=0;var i=this,r=t.URL||t.webkitURL,o=new Blob([n]),a=r.createObjectURL(o);this.worker=new Worker(a),this.worker.addEventListener("message",function(t){i.ticks++,i.trigger("tick",i.ticks),i.trigger(i.ticks)})}var i=function(t){if("start"===t.data.action){var e=6e4/t.data.bpm/t.data.res;t.data.reduce&&(e-=.1*e),timer=setInterval(self.postMessage,e)}else"stop"===t.data.action&&clearInterval(timer)},n="self.addEventListener('message', "+i.toString()+");";s.prototype.on=function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},s.prototype.removeListener=function(t,e){this._events=this._events||{},t in this._events&&this._events[t].splice(this._events[t].indexOf(e),1)},s.prototype.trigger=function(t,e){if(this._events=this._events||{},t in this._events!=!1)for(var s=this._events[t].length;s--;)this._events[t][s].apply(this,Array.prototype.slice.call(arguments,1))},s.prototype.start=function(){this.worker.postMessage({action:"start",bpm:this.bpm,res:this.res})},s.prototype.stop=function(){this.worker.postMessage({action:"stop"})},s.prototype.reset=function(){this.ticks=0},t.Metronome=s}(this);