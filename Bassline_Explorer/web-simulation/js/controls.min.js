function setupplaybackcontrols(){$("#selectmidichannel").change(function(){midi_channel=parseInt($(this).val())});$lowvelocityslider=$("#slidermidilowvelocity");$lowvelocityslider.val(midi_lowvelocity);$lowvelocityslider.change(function(){midi_lowvelocity=parseInt($(this).val())});$highvelocityslider=$("#slidermidihighvelocity");$highvelocityslider.val(midi_highvelocity);$highvelocityslider.change(function(){midi_highvelocity=parseInt($(this).val())});var b=$("#selectscale");for(var e=0;e<mpscales.length;e++){var d='<option value="'+e+'"';if(e===scaleindex){d+=" selected"}d+=">"+mpscales[e][0]+"</option>";b.append(d)}b.change(function(){var h=parseInt(b.val());scale=mpscales[h][1];scaleindex=h});$("#selecttranspose").change(function(){transpose=12+parseInt($(this).val())});var a=$("#selectautoreset");for(var e=0;e<resetperiodtable.length;e++){var d='<option value="'+e+'"';if(e===autoresetindex){d+=" selected"}d+=">"+resetperiodtable[e][0]+"</option>";a.append(d)}a.change(function(){var h=parseInt($(this).val());autoresetindex=h;autoreset=resetperiodtable[autoresetindex][1];clock.setautoreset(autoreset)});$("button#playbutton").click(function(){if(clock.isplaying==false){clock.start();$(this).text("Stop sequencer")}else{clock.stop();$(this).text("Start sequencer")}});var f=$("#slider_tempo");f.val(bpm);f.on("change",function(){bpm=parseInt($(this).val());clock.settempo(bpm)});var c=$("#midixmlformsubmit");var g=$("#recordbutton");g.data("recordstatus","0");g.mousedown(function(){if(g.data("recordstatus")==="0"){g.prop("disabled",true).html("Recording Armed");clock.bind("beforebar",function(){g.prop("disabled",false);g.html("Recording...");c.hide();recorder=new MIDIXMLRecorder();recorder.settempo(bpm);recorder.startrecording();clock.unbind("beforebar")});g.data("recordstatus","1")}else{g.prop("disabled",true).html("Recording Disarmed");clock.bind("beforebar",function(){g.prop("disabled",false).html("Record");clock.unbind("beforebar");recorder.stoprecording();$("#midixmlformhidden").val(recorder.getmidixml());$("#midixmlform").submit();recorder=null});g.data("recordstatus","0")}})}function setupcontrols(){var k=75;var f=k;var i=["#ff0000","#ff00ff","#00ff00","#0000ff","#666"];var j=$("#knob_x");j.knob({width:k,height:k,fgColor:i[4],inputColor:i[4],lineCap:"round",change:function(l){valx=parseInt(l)}});j.val(valx).trigger("change");var h=$("#knob_y");h.knob({width:k,height:k,fgColor:i[4],inputColor:i[4],lineCap:"round",value:valy,change:function(l){valy=parseInt(l)}});h.val(valy).trigger("change");var c=$("#knob_threshold_note");c.knob({width:k,height:k,lineCap:"round",fgColor:i[0],inputColor:i[0],change:function(l){intval=parseInt(l);thresholds[0]=intval}});c.val(thresholds[0]).trigger("change");var b=$("#knob_threshold_octave");b.knob({width:k,height:k,lineCap:"round",fgColor:i[1],inputColor:i[1],change:function(l){intval=parseInt(l);thresholds[1]=intval}});b.val(thresholds[1]).trigger("change");var d=$("#knob_threshold_accent");d.knob({width:k,height:k,fgColor:i[2],inputColor:i[2],lineCap:"round",change:function(l){thresholds[2]=parseInt(l)}});d.val(thresholds[2]).trigger("change");var e=$("#knob_threshold_slide");e.knob({width:k,height:k,fgColor:i[3],inputColor:i[3],lineCap:"round",change:function(l){thresholds[3]=parseInt(l)}});e.val(thresholds[3]).trigger("change");var a=$("#knob_length");a.knob({width:k,height:k,fgColor:i[lnshiftchannel],inputColor:i[lnshiftchannel],lineCap:"round",change:function(l){channelstepcount[lnshiftchannel][0]=parseInt(l)}});a.val(channelstepcount[lnshiftchannel][0]).trigger("change");var g=$("#knob_shift");g.knob({width:k,height:k,fgColor:i[lnshiftchannel],inputColor:i[lnshiftchannel],lineCap:"round",change:function(l){channelstepcount[lnshiftchannel][1]=parseInt(l)}});g.val(channelstepcount[lnshiftchannel][1]).trigger("change");$("input[type='radio']").click(function(){var l=$("input[name='lnshft-function']:checked").val();if(l){lnshiftchannel=parseInt(l);a.val(channelstepcount[lnshiftchannel][0]).trigger("change");a.trigger("configure",{fgColor:i[lnshiftchannel],inputColor:i[lnshiftchannel]});g.val(channelstepcount[lnshiftchannel][1]).trigger("change");g.trigger("configure",{fgColor:i[lnshiftchannel],inputColor:i[lnshiftchannel]})}})};