function setupplaybackcontrols(){$("#selectmidichannel").change(function(){midi_channel=parseInt($(this).val())}),$lowvelocityslider=$("#slidermidilowvelocity"),$lowvelocityslider.val(midi_lowvelocity),$lowvelocityslider.change(function(){midi_lowvelocity=parseInt($(this).val())}),$highvelocityslider=$("#slidermidihighvelocity"),$highvelocityslider.val(midi_highvelocity),$highvelocityslider.change(function(){midi_highvelocity=parseInt($(this).val())});for(var e=$("#selectscale"),n=0;n<mpscales.length;n++){var t='<option value="'+n+'"';n===scaleindex&&(t+=" selected"),t+=">"+mpscales[n][0]+"</option>",e.append(t)}e.change(function(){var n=parseInt(e.val());scale=mpscales[n][1],scaleindex=n}),$("#selecttranspose").change(function(){transpose=12+parseInt($(this).val())});for(var o=$("#selectautoreset"),n=0;n<resetperiodtable.length;n++){var t='<option value="'+n+'"';n===autoresetindex&&(t+=" selected"),t+=">"+resetperiodtable[n][0]+"</option>",o.append(t)}o.change(function(){var e=parseInt($(this).val());autoresetindex=e,autoreset=resetperiodtable[autoresetindex][1],clock.setautoreset(autoreset)}),$("button#playbutton").click(function(){0==clock.isplaying?(clock.start(),$(this).text("Stop sequencer")):(clock.stop(),$(this).text("Start sequencer"))});var l=$("#slider_tempo");l.val(bpm),l.on("change",function(){bpm=parseInt($(this).val()),clock.settempo(bpm)});var i=$("#midixmlformsubmit");i.hide();var r=$("#recordbutton");r.data("recordstatus","0"),r.mousedown(function(){"0"===r.data("recordstatus")?(r.prop("disabled",!0).html("Recording Armed"),clock.bind("beforebar",function(){r.prop("disabled",!1),r.html("Recording..."),i.hide(),recorder=new MIDIXMLRecorder,recorder.settempo(bpm),recorder.startrecording(),clock.unbind("beforebar")}),r.data("recordstatus","1")):(r.prop("disabled",!0).html("Recording Disarmed"),clock.bind("beforebar",function(){r.prop("disabled",!1).html("Record"),clock.unbind("beforebar"),recorder.stoprecording(),$("#midixmlformhidden").val(recorder.getmidixml()),$("#midixmlform").submit(),recorder=null}),r.data("recordstatus","0"))})}function setupcontrols(){var e=75,n=["#ff0000","#ff00ff","#00ff00","#0000ff","#666"],t=$("#knob_x");t.knob({width:e,height:e,fgColor:n[4],inputColor:n[4],lineCap:"round",change:function(e){valx=parseInt(e)}}),t.val(valx).trigger("change");var o=$("#knob_y");o.knob({width:e,height:e,fgColor:n[4],inputColor:n[4],lineCap:"round",value:valy,change:function(e){valy=parseInt(e)}}),o.val(valy).trigger("change");var l=$("#knob_threshold_note");l.knob({width:e,height:e,lineCap:"round",fgColor:n[0],inputColor:n[0],change:function(e){intval=parseInt(e),thresholds[0]=intval}}),l.val(thresholds[0]).trigger("change");var i=$("#knob_threshold_octave");i.knob({width:e,height:e,lineCap:"round",fgColor:n[1],inputColor:n[1],change:function(e){intval=parseInt(e),thresholds[1]=intval}}),i.val(thresholds[1]).trigger("change");var r=$("#knob_threshold_accent");r.knob({width:e,height:e,fgColor:n[2],inputColor:n[2],lineCap:"round",change:function(e){thresholds[2]=parseInt(e)}}),r.val(thresholds[2]).trigger("change");var a=$("#knob_threshold_slide");a.knob({width:e,height:e,fgColor:n[3],inputColor:n[3],lineCap:"round",change:function(e){thresholds[3]=parseInt(e)}}),a.val(thresholds[3]).trigger("change");var c=$("#knob_length");c.knob({width:e,height:e,fgColor:n[lnshiftchannel],inputColor:n[lnshiftchannel],lineCap:"round",change:function(e){channelstepcount[lnshiftchannel][0]=parseInt(e)}}),c.val(channelstepcount[lnshiftchannel][0]).trigger("change");var h=$("#knob_shift");h.knob({width:e,height:e,fgColor:n[lnshiftchannel],inputColor:n[lnshiftchannel],lineCap:"round",change:function(e){channelstepcount[lnshiftchannel][1]=parseInt(e)}}),h.val(channelstepcount[lnshiftchannel][1]).trigger("change"),$("input[type='radio']").click(function(){var e=$("input[name='lnshft-function']:checked").val();e&&(lnshiftchannel=parseInt(e),c.val(channelstepcount[lnshiftchannel][0]).trigger("change"),c.trigger("configure",{fgColor:n[lnshiftchannel],inputColor:n[lnshiftchannel]}),h.val(channelstepcount[lnshiftchannel][1]).trigger("change"),h.trigger("configure",{fgColor:n[lnshiftchannel],inputColor:n[lnshiftchannel]}))})}