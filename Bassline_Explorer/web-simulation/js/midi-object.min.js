function TBMIDI(){this.midichannel=0;this.transpose=24;this.enablerecord=false;this.recording=[];this.scale=null;this.jazz=null;this.havejazz=false;this.$uicontainer=null}TBMIDI.prototype.init=function(b){if(b){this.$uicontainer=$(b);this.$uicontainer.addClass("midiui")}else{return"You must specify a container element for MIDI setup controls"}var a='<object id="Jazz1" classid="CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90" class="hidden"><object id="Jazz2" type="audio/x-jazz" class="hidden"><p>This page requires <a href=http://jazz-soft.net>Jazz-Plugin</a> ...</p></object></object>';this.$uicontainer.append(a);this.jazz=$("#Jazz1")[0];if(this.jazz){if(this.jazz.isJazz){this.havejazz=true}else{if($("#Jazz2")[0].isJazz){this.jazz=$("#Jazz2")[0];this.havejazz=true}else{this.havejazz=false}}}};TBMIDI.prototype.errornooutputdevice=function(){console.log("Can't get MIDI output")};TBMIDI.prototype.setoutputdevice=function(a){if(this.havejazz){this.jazz.MidiOutOpen(a)}else{this.errornooutputdevice();return}};TBMIDI.prototype.addoutputselect=function(){if(this.havejazz){var c='<p>MIDI Output</p><p><select id="selectmidiout"><option value="select">Select MIDI Output</option></select></p>';this.$uicontainer.append(c);var d=$("#selectmidiout");var a=this.jazz.MidiOutList();$.each(a,function(e,f){d.append($("<option>",{value:f,text:f}))});var b=this;d.change(function(){if(d.val()!=="select"){b.setoutputdevice(d.val())}})}else{this.errornooutputdevice();return}};TBMIDI.prototype.setmidichannel=function(a){this.midichannel=a};TBMIDI.prototype.addchannelselect=function(){if(this.havejazz){var b='<p>MIDI Channel</p><p><select id="selectmidichannel"><option value="select">Select MIDI Channel</option></select></p>';this.$uicontainer.append(b);var d=$("#selectmidichannel");for(var c=0;c<16;c++){d.append($("<option>",{value:c,text:c+1}))}var a=this;d.change(function(){if(d.val()!=="select"){a.setmidichannel(parseInt(d.val()))}})}else{this.errornooutputdevice();return}};TBMIDI.prototype.addtestbutton=function(){if(this.havejazz){var c='<p>Test Output</p><p><button type="button" id="testmidioutbutton">test MIDI</button></p>';this.$uicontainer.append(c);var b=$("#testmidioutbutton");var a=this;b.mousedown(function(){a.noteon(a.midichannel,36,127)}).mouseup(function(){a.noteoff(a.midichannel,36,0)})}else{this.errornooutputdevice();return}};TBMIDI.prototype.noteon=function(c,a,b){if(this.havejazz){this.jazz.MidiOut(c+144,a,b)}else{this.errornooutputdevice();return}};TBMIDI.prototype.noteoff=function(b,a){if(this.havejazz){this.jazz.MidiOut(b+128,a,0)}else{this.errornooutputdevice();return}};