function TBMIDI(){this.midichannel=0,this.transpose=24,this.enablerecord=!1,this.recording=[],this.scale=null,this.jazz=null,this.havejazz=!1,this.$uicontainer=null}TBMIDI.prototype.init=function(t){if(!t)return"You must specify a container element for MIDI setup controls";this.$uicontainer=$(t),this.$uicontainer.addClass("midiui");var e=document.createElement("object");e.setAttribute("id","jazz1"),e.setAttribute("classid","CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90"),e.setAttribute("class","hidden");var i=document.createElement("object");i.setAttribute("id","jazz2"),i.setAttribute("class","hidden"),i.setAttribute("type","audio/x-jazz"),i.innerHTML="This page requires the ";var n=document.createElement("a");n.setAttribute("href","http://jazz-soft.net"),n.setAttribute("target","_blank"),n.innerHTML="Jazz MIDI Plugin",i.appendChild(n),e.appendChild(i);document.getElementById(t.replace("#","")).appendChild(e);this.jazz=e.isJazz?e:i,this.jazz.isJazz&&(this.havejazz=!0)},TBMIDI.prototype.errornooutputdevice=function(){console.log("Can't get MIDI output")},TBMIDI.prototype.setoutputdevice=function(t){return this.havejazz?void this.jazz.MidiOutOpen(t):void this.errornooutputdevice()},TBMIDI.prototype.addoutputselect=function(){if(!this.havejazz)return void this.errornooutputdevice();var t='<p>MIDI Output</p><p><select id="selectmidiout"><option value="select">Select MIDI Output</option></select></p>';this.$uicontainer.append(t);var e=$("#selectmidiout"),i=this.jazz.MidiOutList();$.each(i,function(t,i){e.append($("<option>",{value:i,text:i}))});var n=this;e.change(function(){"select"!==e.val()&&n.setoutputdevice(e.val())})},TBMIDI.prototype.setmidichannel=function(t){this.midichannel=t},TBMIDI.prototype.addchannelselect=function(){if(!this.havejazz)return void this.errornooutputdevice();var t='<p>MIDI Channel</p><p><select id="selectmidichannel"><option value="select">Select MIDI Channel</option></select></p>';this.$uicontainer.append(t);for(var e=$("#selectmidichannel"),i=0;16>i;i++)e.append($("<option>",{value:i,text:i+1}));var n=this;e.change(function(){"select"!==e.val()&&n.setmidichannel(parseInt(e.val()))})},TBMIDI.prototype.addtestbutton=function(){if(!this.havejazz)return void this.errornooutputdevice();var t='<p>Test Output</p><p><button type="button" id="testmidioutbutton">test MIDI</button></p>';this.$uicontainer.append(t);var e=$("#testmidioutbutton"),i=this;e.mousedown(function(){i.noteon(i.midichannel,36,127)}).mouseup(function(){i.noteoff(i.midichannel,36,0)})},TBMIDI.prototype.noteon=function(t,e,i){if(!this.havejazz)return void this.errornooutputdevice();var n=t?t:this.midichannel;this.jazz.MidiOut(n+144,e,i)},TBMIDI.prototype.noteoff=function(t,e){if(!this.havejazz)return void this.errornooutputdevice();t?t:this.midichannel;this.jazz.MidiOut(t+128,e,0)};