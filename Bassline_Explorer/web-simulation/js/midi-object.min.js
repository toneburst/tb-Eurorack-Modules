function MIDI(){this.midichannel=0,this.transpose=24,this.enablerecord=!1,this.recording=[],this.scale=null,this.jazz=null,this.havejazz=!1,this.$uicontainer=null}MIDI.prototype.init=function(t){if(!t)return"You must specify a container element for MIDI setup controls";this.$uicontainer=$(t),this.$uicontainer.addClass("midiui");var e='<object id="Jazz1" classid="CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90" class="hidden"><object id="Jazz2" type="audio/x-jazz" class="hidden"><p>This page requires <a href=http://jazz-soft.net>Jazz-Plugin</a> ...</p></object></object>';this.$uicontainer.append(e),this.jazz=$("#Jazz1")[0],this.jazz&&(this.jazz.isJazz?this.havejazz=!0:$("#Jazz2")[0].isJazz?(this.jazz=$("#Jazz2")[0],this.havejazz=!0):this.havejazz=!1)},MIDI.prototype.errornooutputdevice=function(){console.log("Can't get MIDI output")},MIDI.prototype.setoutputdevice=function(t){return this.havejazz?void this.jazz.MidiOutOpen(t):void this.errornooutputdevice()},MIDI.prototype.addoutputselect=function(){if(!this.havejazz)return void this.errornooutputdevice();var t='<p>MIDI Output</p><p><select id="selectmidiout"><option value="select">Select MIDI Output</option></select></p>';this.$uicontainer.append(t);var e=$("#selectmidiout"),i=this.jazz.MidiOutList();$.each(i,function(t,i){e.append($("<option>",{value:i,text:i}))});var s=this;e.change(function(){"select"!==e.val()&&s.setoutputdevice(e.val())})},MIDI.prototype.setmidichannel=function(t){this.midichannel=t},MIDI.prototype.addchannelselect=function(){if(!this.havejazz)return void this.errornooutputdevice();var t='<p>MIDI Channel</p><p><select id="selectmidichannel"><option value="select">Select MIDI Channel</option></select></p>';this.$uicontainer.append(t);for(var e=$("#selectmidichannel"),i=0;16>i;i++)e.append($("<option>",{value:i,text:i+1}));var s=this;e.change(function(){"select"!==e.val()&&s.setmidichannel(parseInt(e.val()))})},MIDI.prototype.addtestbutton=function(){if(!this.havejazz)return void this.errornooutputdevice();var t='<p>Test Output</p><p><button type="button" id="testmidioutbutton">test MIDI</button></p>';this.$uicontainer.append(t);var e=$("#testmidioutbutton"),i=this;e.mousedown(function(){i.noteon(i.midichannel,36,127)}).mouseup(function(){i.noteoff(i.midichannel,36,0)})},MIDI.prototype.selectscale=function(){this.mpscales=Array(),this.mpscales[0]=["Chromatic",[0,1,2,3,4,5,6,7,8,9,10,11]],this.mpscales[1]=["Ionian",[0,0,2,2,4,5,5,7,7,9,9,11]],this.mpscales[2]=["Dorian",[0,0,2,3,3,5,5,7,7,10,10]],this.mpscales[3]=["Phrygian",[0,1,1,3,3,5,5,7,8,8,10,10]],this.mpscales[4]=["Lydian",[0,0,2,2,4,4,6,7,7,9,11]],this.mpscales[5]=["Mixolydian",[0,0,2,2,4,5,5,7,7,9,10,10]],this.mpscales[6]=["Aeolian Minor",[0,0,2,3,3,5,5,7,8,8,10,10]],this.mpscales[7]=["Locrian",[0,1,1,3,3,5,6,6,8,8,10,10]],this.mpscales[8]=["Blues Major",[0,0,3,3,4,4,7,7,7,9,10,10]],this.mpscales[9]=["Blues Minor",[0,0,3,3,3,5,6,7,7,10,10,10]],this.mpscales[10]=["Pentatonic Major",[0,0,2,2,4,4,7,7,7,9,9,9]],this.mpscales[11]=["Pentatonic Minor",[0,0,3,3,3,5,5,7,7,10,10,10]],this.mpscales[12]=["Raga Bhiarav",[0,1,1,4,4,5,5,7,8,8,11,11]],this.mpscales[13]=["Raga Shri",[0,1,1,4,4,4,6,7,8,8,11,11]],this.mpscales[14]=["Raga Rupatavi",[0,1,1,3,3,5,5,7,7,10,10,11]],this.mpscales[15]=["Raga Todi",[0,1,1,3,3,6,6,7,8,8,11,11]],this.mpscales[16]=["Raga Kaafi",[0,0,2,2,4,5,5,5,9,9,10,11]],this.mpscales[17]=["Raga Meg",[0,0,2,2,5,5,5,7,7,9,9,9]],this.mpscales[18]=["Raga Malkauns",[0,0,3,3,3,5,5,8,8,8,10,10]],this.mpscales[19]=["Raga Deepak",[0,0,3,3,4,4,6,6,8,8,10,10]],this.mpscales[20]=["Folkish",[0,1,1,3,4,5,5,7,8,8,10,10]],this.mpscales[21]=["Japanese",[0,1,1,1,5,5,5,7,8,8,8,8]],this.mpscales[22]=["Gamelan",[0,1,1,3,3,3,7,7,8,8,8,8]],this.mpscales[23]=["Whole Tones",[0,0,2,2,4,4,6,6,8,8,10,10]],this.scaleindex=2,this.scale=this.mpscales[this.scaleindex][0]},MIDI.prototype.noteon=function(t,e,i){return this.havejazz?void this.jazz.MidiOut(t+144,e,i):void this.errornooutputdevice()},MIDI.prototype.noteoff=function(t,e){return this.havejazz?void this.jazz.MidiOut(t+128,e,0):void this.errornooutputdevice()};