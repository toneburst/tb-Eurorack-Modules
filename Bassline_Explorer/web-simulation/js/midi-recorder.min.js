function Recorder(){this.isrecording=false;this.ticks=0;this.midixmlheader='<?xml version="1.0" encoding="ISO-8859-1"?><!DOCTYPE MIDIFile SYSTEM "http://www.musicxml.org/dtds/midixml.dtd"><MIDIFile><Format>1</Format><TrackCount>2</TrackCount><TicksPerBeat>8</TicksPerBeat><TimestampType>Absolute</TimestampType>\n';this.midixmltrk0='<Format>1</Format><TrackCount>2</TrackCount><TicksPerBeat>8</TicksPerBeat><TimestampType>Absolute</TimestampType><Track Number="0"><Event><Absolute>0</Absolute><TimeSignature Numerator="4" LogDenominator="2" MIDIClocksPerMetronomeClick="24" ThirtySecondsPer24Clocks="8"/></Event><Event><Absolute>0</Absolute><KeySignature Fifths="0" Mode="0"/></Event><Event><Absolute>0</Absolute><SetTempo Value="371520"/></Event><Event><Absolute>0</Absolute><EndOfTrack/></Event></Track>\n';this.midixmltrk1=null;this.midixmlclose="\n</MIDIFile>";this.midixml=null}MicroEvent.mixin(Recorder);Recorder.prototype.startrecording=function(){this.midixmltrk1='<Track Number="1">\n';if(!this.isrecording){this.isrecording=true;this.ticks=0}};Recorder.prototype.updateticks=function(){this.ticks++};Recorder.prototype.recordstep=function(e,c,a,b){if(this.isrecording){var d="<Event>";d+="<Absolute>"+this.ticks+"</Absolute>";d+="<";d+=e+" ";d+='Channel="0" ';d+='Note="'+a+'" ';d+='Velocity="'+b+'" ';d+="/>";d+="</Event>\n";this.midixmltrk1+=d}};Recorder.prototype.stoprecording=function(){if(this.isrecording){this.isrecording=false;this.midixmltrk1+="<Event><Absolute>"+this.ticks+"</Absolute><EndOfTrack/></Event>\n";this.midixmltrk1+="</Track>";this.midixml=this.midixmlheader+this.midixmltrk0+this.midixmltrk1+this.midixmlclose;this.submitxml()}};Recorder.prototype.submitxml=function(){console.log(this.midixml)};