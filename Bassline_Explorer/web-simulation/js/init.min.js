var valx=0,valy=0,transpose=24,autoresetindex=2,autoreset=resetperiodtable[autoresetindex][1],scaleindex=2,scale=mpscales[scaleindex][1],lnshiftchannel=0,thresholds=new Array;thresholds[0]=127,thresholds[1]=127,thresholds[2]=127,thresholds[3]=127;var stepvals=new Array;stepvals[0]=patterns[0][0][0][0],stepvals[1]=patterns[0][0][1][0],stepvals[2]=patterns[0][0][2][0],stepvals[3]=patterns[0][0][3][0],stepvals[4]=patterns[0][0][4][0],stepvals[5]=patterns[0][0][5][0];var channelstepcount=new Array;channelstepcount[0]=[16,0,0,0],channelstepcount[1]=[16,0,0,0],channelstepcount[2]=[16,0,0,0],channelstepcount[3]=[16,0,0,0];var randomtablecounter=0,randomtablerandomoffset=Math.round(31*Math.random()),slide=!1,bpm=120,clock=new Clock(bpm,.5);$(document).ready(function(){setupcontrols(),setupplaybackcontrols(),setupmidi(),clock.init(),clock.setResetPeriod(autoreset),clock.bind("tick",function(e){masterstepcounter=e,playStep()}),clock.bind("note-off",function(e){getStepVals()})});