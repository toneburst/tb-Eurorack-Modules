var valx=0;var valy=0;var autoresetindex=2;var autoreset=resetperiodtable[autoresetindex][1];var lnshiftchannel=0;var thresholds=new Array();thresholds[0]=127;thresholds[1]=127;thresholds[2]=127;thresholds[3]=127;var stepvals=new Array();stepvals[0]=patterns[0][0][0][0];stepvals[1]=patterns[0][0][1][0];stepvals[2]=patterns[0][0][2][0];stepvals[3]=patterns[0][0][3][0];stepvals[4]=patterns[0][0][4][0];stepvals[5]=patterns[0][0][5][0];var channelstepcount=new Array();channelstepcount[0]=[16,0,0,0];channelstepcount[1]=[16,0,0,0];channelstepcount[2]=[16,0,0,0];channelstepcount[3]=[16,0,0,0];var randomtablecounter=0;var randomtablerandomincrement=Math.round(Math.random()*31);var slide=false;var bpm=120;var clock=new Clock(bpm,0.5);var recorder=null;$(document).ready(function(){setupcontrols();setupplaybackcontrols();setupmidi();clock.init();clock.setResetPeriod(autoreset);clock.bind("tick",function(a){masterstepcounter=a;playStep();if(recorder){recorder.updateticks()}});clock.bind("note-off",function(a){getStepVals();if(recorder){recorder.updateticks()}})});