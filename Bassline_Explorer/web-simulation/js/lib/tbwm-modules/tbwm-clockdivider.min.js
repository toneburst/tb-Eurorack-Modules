function TBMWClockdivider(a){this.resetbars=null;this.autoreset=null;if(a){if(a.autoreset){this.resetbars=a.autoreset;this.setautoreset(a.autoreset)}}this.reset();return this}MicroEvent.mixin(TBMWClockdivider);TBMWClockdivider.prototype.reset=function(){this.tickcounter=0;this.counter0=0;this.counter1=0;this.counter2=0;this.counter3=0;this.counter4=0;this.counter5=0;return this};TBMWClockdivider.prototype.setautoreset=function(a){if(a!==0){this.autoreset=96*a}else{this.autoreset=null}return this};TBMWClockdivider.prototype.updatecounter=function(b,a){return(this.resetbars&&b===(a+1)*this.resetbars)?0:b+1};TBMWClockdivider.prototype.tick=function(){var a=this;a.trigger("tick",this.tickcounter);if(this.tickcounter%3==0){a.trigger("1/32",a.counter0);a.counter0=a.updatecounter(a.counter0,31)}if(this.tickcounter%6==0){a.trigger("1/16",a.counter1);a.counter1=a.updatecounter(a.counter1,15)}if(this.tickcounter%12==0){a.trigger("1/8",a.counter2);a.counter2=a.updatecounter(a.counter2,7)}if(this.tickcounter%24==0){a.trigger("1/4",a.counter3);a.counter3=a.updatecounter(a.counter3,3)}if(this.tickcounter%48==0){a.trigger("1/2",a.counter4);a.counter4=a.updatecounter(a.counter4,1)}if(this.tickcounter%96==0){a.trigger("bar",a.counter5);a.counter5++}this.tickcounter++;if(this.tickcounter%96==0){a.trigger("beforebar","bar")}if(a.autoreset){if(this.tickcounter%(a.autoreset)==0){a.trigger("reset","reset");a.reset()}}return this};