<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Toneburst Web Midi Modules</title>
        <link rel="stylesheet" type="text/css" href="tbwm.css">
        <script src="../jquery-2.1.4.min.js"></script>
        <script src="../microevent/microevent.js" charset="utf-8"></script>
        <script src="../webmidiapi/WebMIDIAPI.min.js" charset="utf-8"></script>
		<script src="tbwm-sharedlib.js" charset="utf-8"></script>
		<script src="tbwm-clock/tbwm-clock.js" charset="utf-8"></script>
        <script src="tbwm-clockdivider.js" charset="utf-8"></script>
        <script src="tbwm-midiout.js" charset="utf-8"></script>
        <script src="tbwm-notequantiser.js" charset="utf-8"></script>
        <script type="text/javascript">
            $(document).ready(function(event) {

                /*var clock = new TBWMClock(120);
                clock.setWorkerURL("tbwm-clock/clockworker.js");
                clock.init();
                clock.start();

                var divider = new TBMWClockdivider();

                clock.bind("tick", function(e) {
                    divider.tick();
                });

                divider.bind("16th", function() {
                    //console.log("quarter");
                });*/

                var midi = new TBMWMIDIOut({
                    instanceid : 0,
                    savesettings : true
                });

                midi.init();

                midi.bind("midistatus", function(e) {
                    midi.addoutputselect({
                        domcontainer : "outputselect",
                        addlabel : true,
                        labeltext : "MIDI Out Device:"
                    })
                    .addoutchannelselect({
                        domcontainer : "outputchannel",
                        addlabel : true,
                        labeltext : "MIDI Out Channel:"
                    })
                    .addtestbutton({
                        domcontainer : "outputtest",
						buttontext : "Test MIDI Output"
                    });
                });

                quantiser = new TBWMNotequantiser({
					instanceid : 0
				})
                .addscaleselect({
                    domcontainer : "scale",
                    addlabel : true,
                    labeltext : "Note Scale:"
                })
				.addrandomrange({
                    domcontainer : "randomise",
                    addlabel : true,
                    labeltext : "Note Scale Randomise:"
                })
				.addshiftselect({
					domcontainer : "shift",
                    addlabel : true,
                    labeltext : "Set Scale Shift:"
				})
				.addflattenrange({
					domcontainer : "flatten",
                    addlabel : true,
                    labeltext : "Set Scale Flatten:"
				})
				.addtransposeselect({
                    domcontainer : "transpose",
                    addlabel : true,
                    labeltext : "Note Transpose:"
                });
            });
        </script>
    </head>
    <body>
        <h3>MIDI Setup</h3>
        <p id="outputselect"></p>
        <p id="outputchannel"></p>
        <p id="outputtest"></p>

        <h3>Quantiser Setup</h3>
        <p id="scale"></p>
        <p id="randomise"></p>
		<p id="shift"></p>
		<p id="flatten"></p>
		<p id="transpose"></p>
    </body>
</html>
