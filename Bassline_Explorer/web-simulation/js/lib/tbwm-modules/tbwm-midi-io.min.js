function TBMIDI(){this.midichannel=0;this.jazz=null;this.havemidi=false;this.havecontainer=false;this.$uicontainer=null;this.uicontainer=null;this.containerclass="midiui";this.idprefix="tbmio";this.outputselectid=this.idprefix+"-outputdevice"}TBMIDI.prototype.errordomelement=function(){var a="Error: Container element not found. You need to specify ID of an existing element (with or without leading '#') when initialising this instance or calling this method";console.log(a);return a};TBMIDI.prototype.errornooutputdevice=function(){this.havemidi=false;var a="Error: No MIDI or no MIDI output device found";console.log(a);return a};TBMIDI.prototype.createlabel=function(c,b){var a=document.createElement("label");a.setAttribute("for",c);a.innerHTML=b;return a};TBMIDI.prototype.init=function(b){if(b){this.$uicontainer=$(b);this.uicontainer=document.getElementById(b.replace("#",""));if(!this.uicontainer){return this.errordomelement()}}else{return this.errordomelement()}this.havecontainer=true;this.uicontainer.classList.add(this.containerclass);var d=document.createElement("object");d.setAttribute("id","jazz1");d.setAttribute("classid","CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90");d.setAttribute("class","hidden");var c=document.createElement("object");c.setAttribute("id","jazz2");c.setAttribute("class","hidden");c.setAttribute("type","audio/x-jazz");c.innerHTML="This page requires the ";var e=document.createElement("a");e.setAttribute("href","http://jazz-soft.net");e.setAttribute("target","_blank");e.innerHTML="Jazz MIDI Plugin";c.appendChild(e);d.appendChild(c);var a=document.getElementById(b.replace("#","")).appendChild(d);this.jazz=(d.isJazz)?d:c;if(this.jazz.isJazz){this.havemidi=true}};TBMIDI.prototype.setoutputdevice=function(a){if(this.havemidi){this.jazz.MidiOutOpen(a)}else{this.errornooutputdevice();return}};TBMIDI.prototype.addoutputselect=function(){if(this.havemidi){var a=this.jazz.MidiOutList();if(a.length>0){var c=this.createlabel(this.outputselectid,"Select MIDI Output Device");var f=document.createElement("select");f.setAttribute("id",this.outputselectid);if(a){for(var e=0;e<a.length;e++){var d=document.createElement("option");d.text=a[e];d.value=a[e];f.add(d)}}this.uicontainer.appendChild(c);this.uicontainer.appendChild(f);var b=this;f.addEventListener("change",function(){b.setoutputdevice(this.value)})}else{this.errornooutputdevice()}}};TBMIDI.prototype.setmidichannel=function(a){this.midichannel=a};TBMIDI.prototype.addchannelselect=function(){if(this.havemidi){var b='<p>MIDI Channel</p><p><select id="selectmidichannel"><option value="select">Select MIDI Channel</option></select></p>';this.$uicontainer.append(b);var d=$("#selectmidichannel");for(var c=0;c<16;c++){d.append($("<option>",{value:c,text:c+1}))}var a=this;d.change(function(){if(d.val()!=="select"){a.setmidichannel(parseInt(d.val()))}})}else{this.errornooutputdevice();return}};TBMIDI.prototype.addtestbutton=function(){if(this.havemidi){var c='<p>Test Output</p><p><button type="button" id="testmidioutbutton">test MIDI</button></p>';this.$uicontainer.append(c);var b=$("#testmidioutbutton");var a=this;b.mousedown(function(){a.noteon(a.midichannel,36,127)}).mouseup(function(){a.noteoff(a.midichannel,36,0)})}else{this.errornooutputdevice();return}};TBMIDI.prototype.noteon=function(d,b,c){if(this.havemidi){var a=(d)?d:this.midichannel;this.jazz.MidiOut(a+144,b,c)}else{this.errornooutputdevice();return}};TBMIDI.prototype.noteoff=function(c,b){if(this.havemidi){var a=(c)?c:this.midichannel;this.jazz.MidiOut(c+128,b,0)}else{this.errornooutputdevice();return}};