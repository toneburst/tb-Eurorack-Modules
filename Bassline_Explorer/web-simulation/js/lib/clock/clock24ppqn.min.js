function Clock24PPQN(t){this.tempo=t,this.audioContext=null,this.isPlaying=!1,this.startTime,this.lookahead=10,this.scheduleAheadTime=.1,this.nextTickTime=0,this.timerWorker=null,this.secondsPerTick=2.5/this.tempo,this.newTempo=this.tempo}MicroEvent.mixin(Clock24PPQN),Clock24PPQN.prototype.setTempo=function(t){this.newTempo=t},Clock24PPQN.prototype.nextTick=function(){this.nextTickTime+=this.secondsPerTick,this.tempo!=this.newTempo&&(this.tempo=this.newTempo,this.secondsPerTick=2.5/this.tempo)},Clock24PPQN.prototype.scheduleTick=function(t){var e=this;e.trigger("tick","Tick!")},Clock24PPQN.prototype.scheduler=function(){for(;this.nextTickTime<this.audioContext.currentTime+this.scheduleAheadTime;)this.scheduleTick(this.nextTickTime),this.nextTick()},Clock24PPQN.prototype.play=function(){this.nextTickTime=this.audioContext.currentTime,this.timerWorker.postMessage("start"),console.log("Starting 96ppqn Clock"),this.isPlaying=!0},Clock24PPQN.prototype.stop=function(){this.timerWorker.postMessage("stop"),console.log("Stopping 96ppqn Clock"),this.isPlaying=!1},Clock24PPQN.prototype.init=function(){var t=this;this.audioContext=new AudioContext;this.audioContext.createOscillator();this.timerWorker=new Worker("js/lib/clock/clockworker.min.js"),this.timerWorker.addEventListener("message",function(e){"tick"==e.data?t.scheduler():console.log("message: "+e.data)},!1),this.timerWorker.postMessage({interval:this.lookahead})};